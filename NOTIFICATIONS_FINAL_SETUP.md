# ููุฎุต ูุธุงู ุงูุฅุดุนุงุฑุงุช - ุงูุชุญุฏูุซ ุงูููุงุฆู

## โ ุงูุชุบููุฑุงุช ุงููููููุฉ:

### 1. **ุฅุถุงูุฉ NEXT_PUBLIC_APP_URL ููู .env.local**
- **ุงูููู**: `.env.local`
- **ุงููููุฉ**: `http://localhost:3000`
- **ุงูุณุจุจ**: ููุณุชุฎุฏู ูู `app/api/pharmacy/prescriptions/respond` ูุงุณุชุฏุนุงุก API ุงูุฅุดุนุงุฑุงุช

### 2. **ุชุนุฏูู Pharmacy Response Endpoint**
- **ุงูููู**: `app/api/pharmacy/prescriptions/respond/route.ts`
- **ุงูุชุบููุฑ**: ุงุณุชุจุฏุงู ุฅูุดุงุก ุงูุฅุดุนุงุฑุงุช ูุจุงุดุฑุฉ ุจุฏุนูุฉ API `create-admin`
- **ุงููุงุฆุฏุฉ**: ูุนุงูุฌุฉ ูุฑูุฒูุฉ ููุฃุฎุทุงุก ูุชุณุฌูู ููุตู
- **ุงูุณุฌู**: ูุธูุฑ `๐`, `โ`, ุฃู `โ` ูู console

### 3. **API ุงูุฅุดุนุงุฑุงุช ุงูููุฌูุฏุฉ (ุชู ุงูุชุญูู ูููุง):**

#### `/api/notifications/create-admin` - ุฅูุดุงุก ุฅุดุนุงุฑ
```typescript
POST /api/notifications/create-admin
{
  user_id: string,
  title: string,
  message: string,
  type?: string,
  data?: object
}
```
- ูุณุชุฎุฏู Service Role Key
- ูุฏุนู ุงููุชุงุจุฉ ูุฃู ูุณุชุฎุฏู
- ููุณุฌู ูู ุฎุทูุฉ

#### `/api/notifications/list` - ูุฑุงุกุฉ ุงูุฅุดุนุงุฑุงุช
```typescript
GET /api/notifications/list?limit=50
```
- ูุนูุฏ: `{ notifications: [], unread: 0 }`
- ูุชู ุงูุชุญูู ูู ูููุฉ ุงููุณุชุฎุฏู ุชููุงุฆูุงู

#### `/api/notifications/mark-read` - ุชุญุฏูุฏ ูููุฑูุก
```typescript
POST /api/notifications/mark-read
{ id: string }
```

#### `/api/notifications/mark-all-read` - ุชุญุฏูุฏ ุงููู ูููุฑูุก
```typescript
POST /api/notifications/mark-all-read
```

#### `/api/notifications/delete` - ุญุฐู ุฅุดุนุงุฑ
```typescript
POST /api/notifications/delete
{ id: string }
```

#### `/api/notifications/test` - ุงุฎุชุจุงุฑ ูุฏูู
```typescript
POST /api/notifications/test
{
  title: string,
  message: string
}
```

### 4. **ููููุงุช ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (ุชู ุงูุชุญูู ูููุง):**

#### `components/notifications/notification-center.tsx`
- ุงุณุชุฎุฏุงู ุตุญูุญ ููู API endpoints
- ุฒุฑ ุชุญุฏูุซ ูุฏูู
- ุฒุฑ ุงุฎุชุจุงุฑ ููุชุญูู ูู ุนูู ุงููุธุงู
- ุนุฑุถ ุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ

---

## ๐ ุณูุฑ ุงูุนูู:

```
1. ุงูุตูุฏูู ูุฑุฏ ุนูู ูุตูุฉ
   โ
2. ููุณุชุฏุนู /api/pharmacy/prescriptions/respond
   โโ ููุดุฆ prescription_response ูู ุฌุฏูู DB
   โโ ูุญุฏุซ ุงููุตูุฉ status = "responded"
   โโ ูุณุชุฏุนู /api/notifications/create-admin
   
3. /api/notifications/create-admin
   โโ ูุชุญูู ูู Service Role Key
   โโ ููุดุฆ ุฅุดุนุงุฑ ุฌุฏูุฏ ูู ุฌุฏูู notifications
   
4. ุงููุฑูุถ ููุชุญ ูุฑูุฒ ุงูุฅุดุนุงุฑุงุช
   โโ ูุณุชุฏุนู /api/notifications/list
   โโ ูุนุฑุถ ุฌููุน ุงูุฅุดุนุงุฑุงุช (ูุฏููุฉ ูุฌุฏูุฏุฉ)
```

---

## ๐ ููุงุท ุงูุชุญูู:

### ุงูุจูุฆุฉ:
- โ `NEXT_PUBLIC_SUPABASE_URL` ููุฌูุฏ
- โ `NEXT_PUBLIC_SUPABASE_ANON_KEY` ููุฌูุฏ  
- โ `SUPABASE_SERVICE_ROLE_KEY` ููุฌูุฏ
- โ `NEXT_PUBLIC_APP_URL` ููุฌูุฏ

### ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- โน๏ธ ุฌุฏูู `notifications` ูุฌุจ ุฃู ูููู ููุฌูุฏุงู
- โน๏ธ RLS Policies ูุฌุจ ุฃู ุชุณูุญ ุจุงููุชุงุจุฉ ููู service role

### ุงูุฎุงุฏู:
- โน๏ธ ุชู ุชุดุบูู ุงูุฎุงุฏูุ
- โน๏ธ ุชู ุฅุนุงุฏุฉ ุชุญููู ุงููุชุตูุญ (Ctrl+F5)?

---

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู:

### ุงูุทุฑููุฉ ุงูุฃููู - ุนุจุฑ ุงููุงุฌูุฉ:
1. ุงูุชุญ ุงููุงูุฐุฉ ุงูุซุงููุฉ ููุฑูุถ
2. ุงุฐูุจ ุฅูู ุงูุฅุดุนุงุฑุงุช
3. ุงุถุบุท ุนูู ุฒุฑ "๐งช ุงุฎุชุจุงุฑ"
4. ูุฌุจ ุฃู ุชุฑู ุฅุดุนุงุฑ ุฌุฏูุฏ

### ุงูุทุฑููุฉ ุงูุซุงููุฉ - ุนุจุฑ ุฑุฏ ุงูุตูุฏููุฉ:
1. ูุตูุฏููุ ุงูุชุญ ูุตูุฉ
2. ุงุถุบุท Reply/ุฑุฏ
3. ุฃุถู ุงูุฃุณุนุงุฑ ูุงุถุบุท Submit
4. ููุฑูุถุ ุดุบูู /api/notifications/list ูู console
5. ูุฌุจ ุฃู ุชุฑู ุงูุฅุดุนุงุฑ ุงูุฌุฏูุฏ

---

## ๐ ุงูุญุงูุงุช ุงููุชููุนุฉ:

### โ ูู ุดูุก ูุนูู:
```
ูู console (ุตูุฏูู):
๐ Creating notification for patient: [id]
โ Notification created: {...}

ูู UI (ูุฑูุถ):
- ุฅุดุนุงุฑ ุฌุฏูุฏ ูุธูุฑ ูู ูุฑูุฒ ุงูุฅุดุนุงุฑุงุช
- ุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ ูุฒุฏุงุฏ
```

### โ๏ธ ูุดุงูู ูุญุชููุฉ:

**ุงููุดููุฉ**: ูุง ูุธูุฑ "๐ Creating notification"
- **ุงูุณุจุจ**: ูุฏ ูุง ูุชู ุงุณุชุฏุนุงุก ุงูู API
- **ุงูุญู**: ุชุญูู ูู Network tab ูู F12

**ุงููุดููุฉ**: ูุธูุฑ "โ Error"
- **ุงูุณุจุจ**: ูุดููุฉ ูู Database ุฃู RLS
- **ุงูุญู**: ุงูุฑุฃ ุฑุณุงูุฉ ุงูุฎุทุฃ ูุชุญูู ูู Supabase

**ุงููุดููุฉ**: โ ููู ุงูุฅุดุนุงุฑ ูุง ูุธูุฑ
- **ุงูุณุจุจ**: ูุฏ ุชููู ูุดููุฉ ูู ุงูุชุญุฏูุซ
- **ุงูุญู**: ุงุถุบุท "ุชุญุฏูุซ" ูู ูุฑูุฒ ุงูุฅุดุนุงุฑุงุช

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ:

1. **ุงุฎุชุจุฑ** ูุธุงู ุงูุฅุดุนุงุฑุงุช ุจุงุณุชุฎุฏุงู ุงูุฒุฑ "๐งช ุงุฎุชุจุงุฑ" ูู ูุฑูุฒ ุงูุฅุดุนุงุฑุงุช
2. **ุชุญูู** ูู console ูู F12 ููุชุฃูุฏ ูู ุฑุณุงุฆู ุงูุฎุทุฃ/ุงููุฌุงุญ
3. **ุงุฎุชุจุฑ** ุฑุฏ ุงูุตูุฏููุฉ ุงููุนูู ูุฑุงูุจ console
4. **ุฃุฎุจุฑ** ุจุฃู ุฑุณุงุฆู ุฎุทุฃ ุชุธูุฑ

