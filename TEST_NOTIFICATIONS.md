# ุงุฎุชุจุงุฑ ูุธุงู ุงูุฅุดุนุงุฑุงุช

## ุงูุฅุนุฏุงุฏุงุช ุงูููุชููุฉ:
โ SUPABASE_SERVICE_ROLE_KEY - ููุฌูุฏ ูู .env.local
โ API endpoint ููุฅุดุนุงุฑุงุช - /api/notifications/create-admin
โ API endpoint ููุฑุฏ - /api/pharmacy/prescriptions/respond
โ API endpoint ููุฑุงุกุฉ ุงูุฅุดุนุงุฑุงุช - /api/notifications/list
โ NEXT_PUBLIC_APP_URL - ุชู ุฅุถุงูุชู ุฅูู .env.local

## ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ:

### 1. ุงูุชุญ ุงููุชุตูุญ ูุดุบู Developer Tools:
```
F12 ุฃู Ctrl+Shift+I
```
ุซู ุงูุชุญ ุชุจููุจ Console

### 2. ูู ุจุชุณุฌูู ุงูุฏุฎูู ููุฑูุถ ูู ูุงูุฐุฉ ุฃุฎุฑู

### 3. ูู ุจุชุณุฌูู ุงูุฏุฎูู ูุตูุฏููุฉ ูู ูุงูุฐุฉ ุฃุฎุฑู

### 4. ุงุฐูุจ ุฅูู ูุงุฆูุฉ ุงููุตูุงุช ุงูุตูุฏูุงููุฉ:
- ุงุฏุฎู ุนูู ุตูุฏููุฉ
- ุงุถุบุท ุนูู "Prescriptions" ุฃู "ุงููุตูุงุช"
- ุงุฎุชุฑ ูุตูุฉ

### 5. ุงุถุบุท ุนูู ุฒุฑ "Reply" ุฃู "ุฑุฏ"
- ุฃุถู ุฃุณุนุงุฑ ุงูุฃุฏููุฉ
- ุงุถุบุท "Submit" ุฃู "ุฅุฑุณุงู"

### 6. ุฑุงูุจ Console ูู ููุง ุงููุงูุฐุชูู:

**ูู ูุงูุฐุฉ ุงูุตูุฏููุฉ ุณุชุธูุฑ:**
```
๐ Creating notification for patient: [patient-id]
โ Notification created: [notification-data]
```

**ุฃู ูุฏ ุชุฑู ุฎุทุฃ:**
```
โ Error creating notification: [error-message]
```

### 7. ูู ุจุชุญุฏูุซ ุตูุญุฉ ุงููุฑูุถ ูุงูุชุญ ูุฑูุฒ ุงูุฅุดุนุงุฑุงุช
- ุงุถุบุท ุนูู ุฃููููุฉ ุงูุฌุฑุณ
- ูุฌุจ ุฃู ุชุฑู ุงูุฅุดุนุงุฑ ุงูุฌุฏูุฏ: "ุฑุฏ ุฌุฏูุฏ ูู ุงูุตูุฏููุฉ"

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก:

### ุฅุฐุง ูู ูุธูุฑ ุงูุฅุดุนุงุฑ:

**ุงูุญุงูุฉ 1: ูุง ูุธูุฑ ุณุฌู ุงูุฅูุดุงุก ูู Console**
- ุงููุดููุฉ: ุงูุทูุจ ูุฏ ูุง ูุตู ุฅูู ุงูู API
- ุงูุญู: ุชุญูู ูู ุฑุงุจุท ุงูู API ูู Network tab ุจู F12

**ุงูุญุงูุฉ 2: ูุธูุฑ "โ Error creating notification"**
- ุงูุฑุฃ ุฑุณุงูุฉ ุงูุฎุทุฃ ุจุนูุงูุฉ
- ูุฏ ุชููู: RLS policy issue, missing permissions, ุฃู invalid data
- ุชุญูู ูู ุตูุญุฉ Supabase Dashboard

**ุงูุญุงูุฉ 3: โ ุชุธูุฑ ุฑุณุงูุฉ ุงููุฌุงุญ ููู ุงูุฅุดุนุงุฑ ูุง ูุธูุฑ**
- ุชุญูู ูู ุงูุฅุดุนุงุฑุงุช ูุจุงุดุฑุฉ:

```javascript
// ูู Console ุจูุงูุฐุฉ ุงููุฑูุถ
fetch('/api/notifications/list').then(r => r.json()).then(d => console.log(d))
```

## ุฑุณุงุฆู ุงููุฌุงุญ ุงููุชููุนุฉ:

```
๐ Creating notification for patient: 550e8400-e29b-41d4-a716-446655440000
โ Notification created: {
  id: "550e8400-e29b-41d4-a716-446655440001",
  user_id: "550e8400-e29b-41d4-a716-446655440000",
  title: "ุฑุฏ ุฌุฏูุฏ ูู ุงูุตูุฏููุฉ",
  message: "ุชู ุงูุฑุฏ ุนูู ูุตูุชู. ุงูุชุญ ุงูุชูุงุตูู ููุงุทูุงุน.",
  type: "pharmacy",
  read: false,
  created_at: "2024-01-15T10:30:00Z"
}
```

## ููุงุท ุงูุชุญูู ูู ุงูุฃุฏุงุก:

1. ูู SUPABASE_SERVICE_ROLE_KEY ููุฌูุฏุ
```bash
echo $SUPABASE_SERVICE_ROLE_KEY
```

2. ูู ุงูุฎุงุฏู ุชู ุฅุนุงุฏุฉ ุชุดุบููู ุจุนุฏ ุงูุชุบููุฑุงุชุ
- ูู ุจุฅููุงู ุงูุฎุงุฏู ูุงูุจุฏุก ูู ุฌุฏูุฏ

3. ูู ุฌุฏูู notifications ููุฌูุฏ ูู Supabaseุ
- ุงุฐูุจ ุฅูู Supabase Dashboard > SQL Editor
- ููุฐ: `SELECT COUNT(*) FROM notifications;`

4. ูู RLS policy ุชุณูุญ ุจุงููุชุงุจุฉ ุนู ุทุฑูู service roleุ
- ุงุฐูุจ ุฅูู RLS Policies ุนูู ุฌุฏูู notifications
